<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>マイクラ風 実績グリッド</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }
    .achievement {
      width: 100px;
      height: 100px;
      border: 2px solid #333;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #eee;
      cursor: pointer;
      user-select: none;
    }
    .unlocked {
      background-color: gold;
    }
    button {
      margin: 5px;
      padding: 8px 12px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>マイクラ風 実績グリッド</h1>

  <label for="preset">プリセットを選択：</label>
  <select id="preset">
    <option value="preset1">プリセット1</option>
    <option value="preset2">プリセット2</option>
    <option value="preset3">プリセット3</option>
  </select>

  <div class="grid" id="grid">
    <!-- 実績ボタンをここに生成 -->
  </div>

  <button onclick="saveAchievements()">保存</button>
  <button onclick="loadAchievements()">読み込み</button>
  <button onclick="resetAchievements()">リセット</button>

  <script>
    const grid = document.getElementById("grid");
    const presetSelect = document.getElementById("preset");
    const achievementsPerPreset = 9; // 3x3 のグリッド

    // 実績グリッドを作る
    function createGrid() {
      grid.innerHTML = "";
      for (let i = 0; i < achievementsPerPreset; i++) {
        const cell = document.createElement("div");
        cell.className = "achievement";
        cell.textContent = "実績" + (i + 1);
        cell.onclick = () => cell.classList.toggle("unlocked");
        grid.appendChild(cell);
      }
    }

    // 現在のプリセット名に応じたキーを返す
    function getStorageKey() {
      return presetSelect.value + "_achievements";
    }

    // 保存
    function saveAchievements() {
      const data = [];
      document.querySelectorAll(".achievement").forEach(cell => {
        data.push(cell.classList.contains("unlocked"));
      });
      localStorage.setItem(getStorageKey(), JSON.stringify(data));
      alert("保存しました！（" + presetSelect.value + "）");
    }

    // 読み込み
    function loadAchievements() {
      const data = JSON.parse(localStorage.getItem(getStorageKey()));
      if (data) {
        document.querySelectorAll(".achievement").forEach((cell, i) => {
          if (data[i]) {
            cell.classList.add("unlocked");
          } else {
            cell.classList.remove("unlocked");
          }
        });
        alert("読み込みました！（" + presetSelect.value + "）");
      } else {
        alert("保存データがありません（" + presetSelect.value + "）");
      }
    }

    // リセット
    function resetAchievements() {
      document.querySelectorAll(".achievement").forEach(cell => {
        cell.classList.remove("unlocked");
      });
      alert("リセットしました");
    }

    // プリセット変更時に新しいグリッド生成 & 読み込み試行
    presetSelect.addEventListener("change", () => {
      createGrid();
      loadAchievements();
    });

    // 初期表示
    createGrid();
    loadAchievements();
  </script>
</body>
</html>
